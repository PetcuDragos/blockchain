<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>MarketChain</title>
</head>
<body>


    <div id="total_number_of_assets"></div>

    <br>Create an asset
    <br>Name of the asset: <input type="text" id="asset_name">
    <br>Name of the game: <input type="text" id="asset_game">
    <br>Type of the asset: <input type="text" id="asset_type">
    <br>Price(in wei): <input type="number" id="asset_price">
    <br><button onclick="create_asset()">Create Asset</button>





<script src="jquery-3.6.0.js"></script>
<script src="https://cdn.jsdelivr.net/npm/web3@latest/dist/web3.min.js"></script>
<script>

    var contract;
    $(document).ready(function(){
        $.getJSON("abi.json", function(abi) {
            web3 = new Web3(web3.currentProvider);
            var address = "0x0fF017F7bbCbd6a3a53af6F63e8cbAb7E22Cc621";
            contract = new web3.eth.Contract(abi,address);
            console.log(contract.methods);
            contract.methods.getTotalNumberOfAssets().call().then(function(res){
                $("#total_number_of_assets").html("There are " + res + " assets registered.");
            });

        });


    });
    function create_asset(){
        var name = $("#asset_name").val();
        var game = $("#asset_game").val();
        var type = $("#asset_type").val();
        var price = $("#asset_price").val();
        web3.eth.requestAccounts().then(function(acc){
            return contract.methods.createAsset(name, game, type, price).send({from: acc[0], gas: 3000000, value: 1}).then(function(res){console.log(res)}).catch(function(res){console.log(res)});
        })
    }

</script>

</body>
</html>